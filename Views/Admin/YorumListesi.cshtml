@using WebProje2.Models.Siniflar
@model List<Yorumlar>
@{
    ViewBag.Title = "YorumListesi";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Yorum Listesi</h2>
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<table class="table table-bordered">
    <tr>
        <th>ID</th>
        <th>Kullanıcı</th>
        <th>Mail</th>
        <th>Yorum</th>
        <th>Blog</th>
        <th>Sil</th>
        <th>Güncelle</th>
        <th>Detaylar</th>
    </tr>
    @foreach (var x in Model)
    {
        <tr>
            <td>@x.ID</td>
            <td>@x.KullaniciAdi</td>
            <td>@x.Mail</td>
            <td>@x.Yorum</td>
            <td>@x.Blog.Baslik</td>
            <td><a href="/Admin/YorumSil/@x.ID" class="btn btn-danger" id="yorumSilButton">Sil</a></td>
            <td><a href="/Admin/YorumGetir/@x.ID" class="btn btn-warning">Güncelle</a></td>
            <td><a href="/Blog/BlogDetay/@x.BlogId" class="btn btn-primary">Blog Görüntüle</a></td>

        </tr>
    }
</table>
<script>
    $("#yorumSilButton").click(function () {
        
        swal({
            title: "Emin misiniz?",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "Evet!",
            cancelButtonText: "İptal",
            closeOnConfirm: true
        }, function (isConfirm) {
            if (isConfirm) {
                document.getElementById("yorumSilButton").submit();
            } else {
                document.getElementById("yorumSilButton").submit();
            }
        });
        function(isConfirm) {
            if (isConfirm) {
                swal("Silindi!", "Your imaginary file has been deleted.", "success");
            } else {
                swal("İptal edildi", "Your imaginary file is safe :)", "error");
            }
        });
</script>
